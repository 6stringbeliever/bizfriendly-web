<!DOCTYPE html>

<html>
<head>
  <title>BfUser.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="__init__.html">
                __init__.py
              </a>
            
              
              <a class="source" href="admin.html">
                admin.py
              </a>
            
              
              <a class="source" href="api.html">
                api.py
              </a>
            
              
              <a class="source" href="config.html">
                config.py
              </a>
            
              
              <a class="source" href="forms.html">
                forms.py
              </a>
            
              
              <a class="source" href="models.html">
                models.py
              </a>
            
              
              <a class="source" href="routes.html">
                routes.py
              </a>
            
              
              <a class="source" href="BfUser.html">
                BfUser.js
              </a>
            
              
              <a class="source" href="config.html">
                config.js
              </a>
            
              
              <a class="source" href="connect.html">
                connect.js
              </a>
            
              
              <a class="source" href="edit.html">
                edit.js
              </a>
            
              
              <a class="source" href="instructions.html">
                instructions.js
              </a>
            
              
              <a class="source" href="learn.html">
                learn.js
              </a>
            
              
              <a class="source" href="lesson.html">
                lesson.js
              </a>
            
              
              <a class="source" href="new-category.html">
                new-category.js
              </a>
            
              
              <a class="source" href="new-service.html">
                new-service.js
              </a>
            
              
              <a class="source" href="profile.html">
                profile.js
              </a>
            
              
              <a class="source" href="service.html">
                service.js
              </a>
            
              
              <a class="source" href="teach.html">
                teach.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>BfUser.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">var</span> BfUser = (<span class="function"><span class="keyword">function</span> <span class="params">(BfUser)</span>  {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>/// CONSTRUCTION /////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> name = <span class="string">""</span>;
  <span class="keyword">var</span> email = <span class="string">""</span>;
  <span class="keyword">var</span> bfAccessToken = <span class="string">""</span>;
  <span class="keyword">var</span> signedIn = <span class="literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>/// PUBLIC METHODS /////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span>{</span>

    <span class="keyword">if</span> (config.debug) console.log(<span class="string">"Init BfUser."</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>if &quot;signout=true&quot; is present in the URL, clear the cookie</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (_getURLParameter(<span class="string">'signout'</span>) == <span class="string">'true'</span>)
    {
      _clearUserCookie();
    }
    <span class="keyword">else</span>
    {
      <span class="keyword">var</span> userData = _readUserCookie();
      <span class="keyword">if</span> (userData){
        BfUser.id = userData.id;
        BfUser.name = userData.name;
        BfUser.email = userData.email;
        BfUser.bfAccessToken = userData.access_token;
        BfUser.signedIn = userData.signedIn;

        <span class="keyword">if</span> (userData.access_token){
          $(<span class="string">"#signup-form"</span>).removeClass(<span class="string">'alert-danger'</span>).addClass(<span class="string">'alert alert-success'</span>).html(<span class="string">"You're already signed up! &lt;a href='signup.html?signout=true'&gt;Need to create another account?&lt;/a&gt;"</span>);
        }
      }
    }

    _main();
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>/// PRIVATE METHODS /////</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_main</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Signup clicked, send info to server</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="string">'#bfSignUp'</span>).click(_signUpClicked);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>SignIn clicked, send info to server</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="string">'#bfSignIn'</span>).click(_signInClicked);</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>SignOut clicked, clear state cookie</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="string">'#signOutLink'</span>).click(_signOutClicked);</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>A password reset is requested</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="string">'#request-password-reset-btn'</span>).click(_requestPasswordResetClicked);</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>The password is reset</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="string">'#password-reset-btn'</span>).click(_passwordResetClicked);</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Setup page based on signin state</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _updatePage();
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Make a post to server with API access token appended</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_tokenPost</span><span class="params">(requestUrl, data, successFunc)</span> {</span>
    $.ajax({
      url: requestUrl,
      type:<span class="string">"POST"</span>,
      beforeSend: <span class="function"><span class="keyword">function</span><span class="params">(xhr)</span> {</span>
        xhr.setRequestHeader(<span class="string">"Authorization"</span>, BfUser.bfAccessToken);
      },
      data:data,
      success:successFunc
    })
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Read the user state cookie: return json</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_readUserCookie</span><span class="params">()</span>{</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Pull data out of cookie</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $.cookie.json = <span class="literal">true</span>;
    <span class="keyword">var</span> cookieData = $.cookie(<span class="string">'BfUser'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Cookie doesn&#39;t exist, create it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (cookieData == <span class="literal">undefined</span>) {
      _setUserCookie(<span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="literal">false</span>, <span class="string">""</span>);
    }
    <span class="keyword">return</span> cookieData;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Set the user state cookie</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_setUserCookie</span><span class="params">(id, name, email, status, access_token)</span>{</span>
    $.cookie.json = <span class="literal">true</span>;
    <span class="keyword">var</span> setData = {id: id, name: name, email: email, signedIn: status,
      access_token: access_token};
    $.cookie(<span class="string">'BfUser'</span>, setData, {expires:<span class="number">7</span>, path: <span class="string">'/'</span>});
    <span class="keyword">return</span> <span class="literal">true</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Clears the user state cookie</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_clearUserCookie</span><span class="params">()</span>
  {</span>
    BfUser.id = <span class="string">""</span>;
    BfUser.email = <span class="string">""</span>;
    BfUser.name = <span class="string">""</span>;
    BfUser.signedIn = <span class="literal">false</span>;
    BfUser.access_token = <span class="string">""</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>set cleared cookie values in case cookie isn&#39;t removed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _setUserCookie(BfUser.id, BfUser.name, BfUser.email, BfUser.signedIn, BfUser.bfAccessToken);
    $.removeCookie(<span class="string">'BfUser'</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Update page to reflect user state</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_updatePage</span><span class="params">()</span>{</span>
    <span class="keyword">if</span> (BfUser.signedIn) {
      $(<span class="string">'#signInLink'</span>).hide();
      $(<span class="string">'.bfUserName'</span>).text(BfUser.name);
      $(<span class="string">'#signOutLink'</span>).show();
    }
    <span class="keyword">else</span> {
      $(<span class="string">'#signInLink'</span>).show();
      $(<span class="string">'#signOutLink'</span>).hide();
    }
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_badPost</span><span class="params">(response)</span>{</span>
    response = $.parseJSON(response.responseText);
    console.log(response.error);
    $(<span class="string">'#alert h2'</span>).addClass(<span class="string">'alert alert-danger'</span>).html(response.error);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Send sign up info to server on signup click.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_signUpClicked</span><span class="params">(event)</span>{</span>
    <span class="keyword">if</span> (config.debug) console.log(<span class="string">"Submitting signup info."</span>)
      newUser = {
        name : $(<span class="string">'#name'</span>).val(),
        email : $(<span class="string">'#email'</span>).val(),
        password : $(<span class="string">'#password'</span>).val()
    }
    <span class="keyword">if</span> (config.debug) console.log(newUser);
    $.post(config.bfUrl + <span class="string">'/signup'</span>, newUser, _signedUp).fail(_badPost);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Send sign in info to server on signin click.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_signInClicked</span><span class="params">(event)</span>{</span>
    returningUser = {
      email : $(<span class="string">'#email'</span>).val(),
      password : $(<span class="string">'#password'</span>).val()
    };
    <span class="keyword">if</span> (config.debug) console.log(returningUser);
    $.post(config.bfUrl + <span class="string">'/signin'</span>, returningUser, _signedIn).fail(_badPost);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Sign out clicked, clear user state/cookie</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_signOutClicked</span><span class="params">(event)</span>{</span>
    _clearUserCookie();
    _updatePage();
    window.open(<span class="string">"signin.html"</span>, <span class="string">"_self"</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>A password reset is requested</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_requestPasswordResetClicked</span><span class="params">(response)</span>{</span>
    <span class="keyword">var</span> email = {<span class="string">"email"</span> : $(<span class="string">'#reset-email'</span>).val()}
    $.post(config.bfUrl+<span class="string">'/request_password_reset'</span>,email, <span class="function"><span class="keyword">function</span><span class="params">(response)</span>{</span>
      console.log(response);
      response = $.parseJSON(response);
      console.log(response.message);
      <span class="keyword">if</span> (response.message == <span class="string">"Queued. Thank you."</span>){
        $(<span class="string">'#alert h2'</span>).removeClass(<span class="string">'alert-danger'</span>).addClass(<span class="string">'alert alert-success'</span>).text(<span class="string">"Check your email."</span>);
      }
    }).fail(_badPost);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>THe new password is sent in</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_passwordResetClicked</span><span class="params">(response)</span>{</span>
    <span class="keyword">var</span> postData = {
      <span class="string">"email"</span> : $(<span class="string">'#reset-email'</span>).val(),
      <span class="string">"password"</span> : $(<span class="string">'#reset-password-field'</span>).val(),
      <span class="string">"resetToken"</span> : window.location.search.split(<span class="string">'?'</span>)[<span class="number">1</span>]
    }
    $.post(config.bfUrl+<span class="string">'/password_reset'</span>, postData, <span class="function"><span class="keyword">function</span><span class="params">(response)</span>{</span>
      console.log(response);
      console.log(response.status);
      <span class="keyword">if</span> (response.status == <span class="number">200</span>){
        $(<span class="string">'#alert h2'</span>).removeClass(<span class="string">'alert-danger'</span>).addClass(<span class="string">'alert alert-success'</span>).text(<span class="string">"Password reset."</span>);
      }
    }).fail(_badPost);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>SignedUp successful</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_signedUp</span><span class="params">(response)</span>{</span>
    <span class="keyword">if</span> (config.debug) console.log(response);
    BfUser.id = response.id;
    BfUser.email = response.email
    BfUser.bfAccessToken = response.access_token;
    BfUser.signedIn = <span class="literal">true</span>;
    BfUser.name = response.name;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Set a cookie!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $.removeCookie(<span class="string">'BfUser'</span>);
    _setUserCookie(BfUser.id, BfUser.name, BfUser.email, BfUser.signedIn, BfUser.bfAccessToken);
    <span class="keyword">if</span> (config.debug) console.log($.cookie(<span class="string">'BfUser'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>disable input fields and button when successfully signed up</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="string">'#signup-form input'</span>).attr(<span class="string">"disabled"</span>, <span class="string">"disabled"</span>);
    $(<span class="string">'#bfSignUp'</span>).attr(<span class="string">"disabled"</span>, <span class="string">"disabled"</span>);

    _updatePage();
    $(<span class="string">'#alert h2'</span>).addClass(<span class="string">'alert alert-success'</span>).html(<span class="string">"Great. You're all signed up."</span>);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Set User state based on sign in response</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_signedIn</span><span class="params">(response)</span>{</span>
    <span class="keyword">if</span> (config.debug) console.log(response);
    BfUser.id = response.id;
    BfUser.email = response.email
    BfUser.bfAccessToken = response.access_token;
    BfUser.signedIn = <span class="literal">true</span>;
    BfUser.name = response.name;</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Set a cookie!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $.removeCookie(<span class="string">'BfUser'</span>);
    _setUserCookie(BfUser.id, BfUser.name, BfUser.email, BfUser.signedIn, BfUser.bfAccessToken);
    <span class="keyword">if</span> (config.debug) console.log($.cookie(<span class="string">'BfUser'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>disable input fields and button when successfully signed up</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="string">'#signin-form input'</span>).attr(<span class="string">"disabled"</span>, <span class="string">"disabled"</span>);
    $(<span class="string">'#bfSignIn'</span>).attr(<span class="string">"disabled"</span>, <span class="string">"disabled"</span>);

    _updatePage();
    $(<span class="string">'#alert h2'</span>).addClass(<span class="string">'alert alert-success'</span>).html(<span class="string">"Great. You're signed in. &lt;a href='signin.html?signout=true'&gt;Sign in under a different account?&lt;/a&gt;"</span>);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Update page to reflect user state</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_updatePage</span><span class="params">()</span>{</span>
    <span class="keyword">if</span> (BfUser.signedIn) {
      $(<span class="string">'#signInLink'</span>).hide();
      $(<span class="string">'#signUpLink'</span>).hide();
      $(<span class="string">'#bfUserName'</span>).text(BfUser.name);
      $(<span class="string">'#bfUserName'</span>).show();
      $(<span class="string">'#signOutLink'</span>).show();
    }
    <span class="keyword">else</span> {
      $(<span class="string">'#signInLink'</span>).show();
      $(<span class="string">'#signUpLink'</span>).show();
      $(<span class="string">'#bfUserName'</span>).html(<span class="string">'&lt;a href="#"&gt;&lt;/a&gt;'</span>);
      $(<span class="string">'#bfUserName'</span>).hide();
      $(<span class="string">'#signOutLink'</span>).hide();
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Read the user state cookie: return json</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_readUserCookie</span><span class="params">()</span>{</span></pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Pull data out of cookie</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $.cookie.json = <span class="literal">true</span>;
    <span class="keyword">var</span> cookieData = $.cookie(<span class="string">'BfUser'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Cookie doesn&#39;t exist, create it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (cookieData == <span class="literal">undefined</span>) {
      _setUserCookie(<span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="literal">false</span>, <span class="string">""</span>);
    }
    <span class="keyword">return</span> cookieData;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Remember the access token of a service connection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">create_connection</span><span class="params">(data, successFunc)</span> {</span>
    _tokenPost(config.bfUrl + <span class="string">'/create_connection'</span>, data, successFunc)
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Remember the most recent step progress</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">record_step</span><span class="params">(data, successFunc)</span> {</span>
    _tokenPost(config.bfUrl + <span class="string">'/record_step'</span>, data, successFunc)
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Check for new</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">check_for_new</span><span class="params">(data, successFunc)</span> {</span>
    _tokenPost(config.bfUrl + <span class="string">'/check_for_new'</span>, data, successFunc)
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Check if attribute exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">check_if_attribute_exists</span><span class="params">(data, successFunc)</span> {</span>
    _tokenPost(config.bfUrl + <span class="string">'/check_if_attribute_exists'</span>, data, successFunc)
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Check attribute for value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">check_attribute_for_value</span><span class="params">(data, successFunc)</span> {</span>
    _tokenPost(config.bfUrl + <span class="string">'/check_attribute_for_value'</span>, data, successFunc)
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Check attribute for update</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">check_attribute_for_update</span><span class="params">(data, successFunc)</span> {</span>
    _tokenPost(config.bfUrl + <span class="string">'/check_attribute_for_update'</span>, data, successFunc)
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Get attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">get_attributes</span><span class="params">(data, successFunc)</span> {</span>
    _tokenPost(config.bfUrl + <span class="string">'/get_attributes'</span>, data, successFunc)
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Get attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">postRating</span><span class="params">(data, successFunc)</span> {</span>
    _tokenPost(config.bfUrl + <span class="string">'/post_rating'</span>, data, successFunc)
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Retrieve a URL parameter
@param name [String] The parameter name to retrieve.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_getURLParameter</span><span class="params">(name)</span> {</span>
    <span class="keyword">return</span> decodeURI(
        (RegExp(name + <span class="string">'='</span> + <span class="string">'(.+?)(&amp;|$)'</span>).exec(location.search)||[,<span class="literal">null</span>])[<span class="number">1</span>]
    );
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>add public methods to the returned module and return it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  BfUser.init = init;
  BfUser.record_step = record_step;
  BfUser.create_connection = create_connection;
  BfUser.check_for_new = check_for_new;
  BfUser.check_if_attribute_exists = check_if_attribute_exists;
  BfUser.check_attribute_for_value = check_attribute_for_value;
  BfUser.check_attribute_for_update = check_attribute_for_update;
  BfUser.get_attributes = get_attributes;
  BfUser.postRating = postRating;

  <span class="keyword">return</span> BfUser;
}(BfUser || {}));</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Initialize Module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>BfUser.init();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
